overlay21:
  versions:
    - EU
    - NA
    - JP
  address:
    EU: 0x238AC80
    NA: 0x238A140
    JP: 0x238B6A0
  length:
    EU: 0x2E20
    NA: 0x2E20
    JP: 0x2E40
  description: Controls the Croagunk Swap Shop.
  functions:
    - name: SwapShopDialogueManager
      address:
        EU: 0x238AC80
      description: |-
        Called primarily to fill dialogue boxes or display portraits, this function exists to print the next portrait, dialogue, or input for the Swap Shop. 
        Consistently writes the provided input to shared_switch_case, and occasionally writes to next_switch_case.  
        Often calls SwapShopInventoryManager, and is often called by SwapShopMainManager.
        
        r0: New current_switch_case value.
    - name: GetFirstExclusivePrerequisite
      address:
        EU: 0x238C468
      description: |-
        Retrieves the item ID of the first item needed to trade for the specified item. There are hardcoded exceptions for the Eeveelution/Hitmontrio items,
        but outside of that, the output will be as follows.
          output_id = input_id - ((input_id - 0x1FA) % 4)
        r0: item ID of the exclusive item to be checked.
        return: item ID of the first exclusive item required to trade for the input.
    - name: SwapShopEntryPoint
      address:
        EU: 0x238C388
      description: |-
        Is the entrypoint of the overlay_load_entry, and seems to run once to initiate the Swap Shop. Is not called anywhere else.
        Allocates space for [TO BE NAMED astruct_9], and initializes many of its fields. 
        return: Always returns 1.
    - name: SwapShopEntryPoint
      address:
        EU: 0x238C43C
      description: |-
        Is the destructor of the overlay_load_entry, and seems to run once on closing the Swap Shop. Is not called anywhere else.
        Frees up the allocated space for [TO BE NAMED astruct_9] if it is not already empty. 
    - name: SwapShopMainManager
      address:
        EU: 0x238C468
      description: |-
        Called every frame the Croagunk Swap Shop is open, acting as a parent function for the various processes the Swap Shop is responsible for. 
        Primarily handles displaying dialogue boxes, retrieving menu selections, and contributing updates to the various switch case indices.
        Often calls SwapShopDialogueManager, either with an immediate or with the designated next_switch_case value. 
        
        return: Typically returns 1, but seems to return 4 to exit the Swap Shop. Possibly related to the explorerscript output?
  data:
    - name: SWAP_SHOP_WINDOW_PARAMS_1
      address:
        EU: 0x238D568
        NA: 0x238CA28
        JP: 0x238DF98
      length:
        EU: 0x10
        NA: 0x10
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: SWAP_SHOP_MENU_ITEMS_CONFIRM
      address:
        EU: 0x238D578
        NA: 0x238CA38
        JP: 0x238DFA8
      length:
        EU: 0x18
        NA: 0x18
        JP: 0x18
    - name: SWAP_SHOP_SUBMENU_ITEMS_1
      address:
        EU: 0x238D590
        NA: 0x238CA50
        JP: 0x238DFC0
      length:
        EU: 0x18
        NA: 0x18
        JP: 0x18
    - name: SWAP_SHOP_SUBMENU_ITEMS_2
      address:
        EU: 0x238D5A8
        NA: 0x238CA68
        JP: 0x238DFD8
      length:
        EU: 0x20
        NA: 0x20
        JP: 0x20
    - name: SWAP_SHOP_MAIN_MENU_ITEMS_1
      address:
        EU: 0x238D5C8
        NA: 0x238CA88
        JP: 0x238DFF8
      length:
        EU: 0x20
        NA: 0x20
        JP: 0x20
    - name: SWAP_SHOP_MAIN_MENU_ITEMS_2
      address:
        EU: 0x238D5E8
        NA: 0x238CAA8
        JP: 0x238E018
      length:
        EU: 0x28
        NA: 0x28
        JP: 0x28
    - name: SWAP_SHOP_SUBMENU_ITEMS_3
      address:
        EU: 0x238D610
        NA: 0x238CAD0
        JP: 0x238E040
      length:
        EU: 0x30
        NA: 0x30
        JP: 0x30
    - name: OVERLAY21_UNKNOWN_STRING_IDS
      address:
        NA: 0x238CB00
      length:
        NA: 0x38
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: SWAP_SHOP_WINDOW_PARAMS_2
      address:
        NA: 0x238CB38
      length:
        NA: 0x10
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: SWAP_SHOP_WINDOW_PARAMS_3
      address:
        NA: 0x238CB48
      length:
        NA: 0x10
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: SWAP_SHOP_WINDOW_PARAMS_4
      address:
        NA: 0x238CB58
      length:
        NA: 0x10
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: SWAP_SHOP_WINDOW_PARAMS_5
      address:
        EU: 0x238D6A8
        NA: 0x238CB68
        JP: 0x238E0D8
      length:
        EU: 0x10
        NA: 0x10
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: SWAP_SHOP_WINDOW_PARAMS_6
      address:
        EU: 0x238D6B8
        NA: 0x238CB78
        JP: 0x238E0E8
      length:
        EU: 0x10
        NA: 0x10
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: SWAP_SHOP_WINDOW_PARAMS_7
      address:
        EU: 0x238D6C8
        NA: 0x238CB88
        JP: 0x238E0F8
      length:
        EU: 0x10
        NA: 0x10
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: SWAP_SHOP_WINDOW_PARAMS_8
      address:
        EU: 0x238D6D8
        NA: 0x238CB98
        JP: 0x238E108
      length:
        EU: 0x10
        NA: 0x10
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: SWAP_SHOP_WINDOW_PARAMS_9
      address:
        EU: 0x238D6E8
        NA: 0x238CBA8
        JP: 0x238E118
      length:
        EU: 0x10
        NA: 0x10
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: OVERLAY21_JP_STRING
      address:
        EU: 0x238DA5C
        NA: 0x238CF1C
        JP: 0x238E48C
      length:
        NA: 0x8
      description: 合成：
    - name: OVERLAY21_RESERVED_SPACE
      address:
        NA: 0x238CF38
      length:
        NA: 0x8
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: OVERLAY21_UNKNOWN_POINTER__NA_238CF40
      address:
        EU: 0x238DA80
        NA: 0x238CF40
        JP: 0x238E4C0
      length:
        NA: 0x4
      description: "Note: unverified, ported from Irdkwia's notes"
    - name: OVERLAY21_UNKNOWN_POINTER__NA_238CF44
      address:
        NA: 0x238CF44
      length:
        NA: 0x4
      description: "Note: unverified, ported from Irdkwia's notes"
